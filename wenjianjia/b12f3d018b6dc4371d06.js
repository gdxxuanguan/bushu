class Compile{constructor(e,t,i){if(1!==i&&(this.el=this.isElementNode(e)?e:document.querySelector(e),this.vm=t,this.el)){let e=this.nodeToFragment(this.el);this.compile(e),this.el.appendChild(e)}}isElementNode(e){return 1===e.nodeType}isDirective(e){return e.includes("v-")}nodeToFragment(e){let t,i=document.createDocumentFragment();for(;t=e.firstChild;)i.appendChild(t);return i}compile(e){let t=e.childNodes;Array.from(t).forEach((e=>{this.isElementNode(e)?(this.compileElement(e),this.compile(e)):this.compileText(e)}))}compileText(e){let t=e.textContent;/\{\{([^{]+)\}\}/g.test(t)&&CompileUtil.text(e,this.vm,t)}compileElement(e){let t=e.attributes;Array.from(t).forEach((t=>{let i=t.name;if(this.isDirective(i)){let l=t.value,o=i.slice(2);CompileUtil[o](e,this.vm,l)}}))}}CompileUtil={getValue:(e,t)=>t.split(".").reduce(((e,t)=>e[t]),e.$data),text(e,t,i){let l=this.update.updateText,o=i.trim();o=o.slice(2,o.length-2),new Watcher(t,o,(i=>{l(e,this.getValue(t,o))})),l(e,this.getValue(t,o))},model(e,t,i){let l=this.update.updateModel;new Watcher(t,i,(o=>{l(e,this.getValue(t,i))})),e.addEventListener("input",(e=>{let l=e.target.value,o=i.split(".");o.reduce(((e,t,i)=>i===o.length-1?e[t]=l:e[t]),t.$data)})),l(e,this.getValue(t,i))},update:{updateText(e,t){e.textContent=t},updateModel(e,t){e.value=t}}},module.exports={Compile};